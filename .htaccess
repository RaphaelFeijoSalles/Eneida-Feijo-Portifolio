RewriteEngine On

# 1. Forçar HTTPS (Segurança básica)
RewriteCond %{HTTPS} off
RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

# 2. REMOVER "index.html" DA URL (A Mágica da Limpeza)
# Se alguém acessar "site.com/index.html", muda para "site.com/"
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /index\.html\ HTTP/
RewriteRule ^index\.html$ / [R=301,L]

# Se alguém acessar "site.com/pasta/index.html", muda para "site.com/pasta/"
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /([^/]+/)*index\.html\ HTTP/
RewriteRule ^(([^/]+/)*)index\.html$ /$1 [R=301,L]

# 3. Tratamento de extensões
# Garante que pastas sejam acessadas com barra no final
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !(\.[a-zA-Z0-9]{1,5}|/)$
RewriteRule (.*)$ /$1/ [R=301,L]